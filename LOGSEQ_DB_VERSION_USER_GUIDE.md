# Logseq DB 版本用户操作手册

> **重要提示**：这是 Logseq 的数据库版本（DB Version），与之前的文件版本（File Graph）在架构上有重大变化。本手册适用于新版本用户。

## 📋 目录

1. [快速开始](#快速开始)
2. [核心概念](#核心概念)
3. [基础操作](#基础操作)
4. [高级功能](#高级功能)
5. [快捷键参考](#快捷键参考)
6. [常见问题](#常见问题)

---

## 🚀 快速开始

### 首次使用

1. **创建新图谱（Graph）**
   - 打开 Logseq，点击"新建图谱"或"Add Graph"
   - 输入图谱名称（例如："我的笔记"）
   - 图谱会自动创建并初始化

2. **了解界面布局**
   ```
   ┌─────────────┬──────────────────┬─────────────┐
   │  左侧边栏    │   主编辑区域      │  右侧边栏   │
   │  (导航)     │   (笔记内容)     │  (引用/图)  │
   └─────────────┴──────────────────┴─────────────┘
   ```

3. **开始写第一条笔记**
   - 在主编辑区域直接输入文字
   - 按 `Enter` 创建新块（Block）
   - 按 `Tab` 缩进创建子块

---

## 💡 核心概念

### 1. 图谱（Graph）
- **什么是图谱**：你的所有笔记数据存储在一个"图谱"中
- **与旧版本的区别**：数据存储在 SQLite 数据库中，而不是 Markdown 文件
- **优势**：查询更快、支持实时协作、移动端友好

### 2. 页面（Page）
- **创建页面**：输入 `[[页面名称]]` 或使用快捷键 `Cmd/Ctrl + O`
- **页面属性**：页面可以添加属性（Properties），类似数据库字段
- **页面类型**：
  - 普通页面
  - 日记页面（自动按日期创建）
  - 标签页面（以 `#` 开头）

### 3. 块（Block）
- **什么是块**：笔记的基本单位，每行是一个块
- **块引用**：使用 `((块ID))` 引用其他块
- **块操作**：
  - `Enter`：创建同级新块
  - `Shift + Enter`：在同一块内换行
  - `Tab`：缩进（创建子块）
  - `Shift + Tab`：取消缩进

### 4. 属性（Properties）
- **什么是属性**：类似数据库字段，用于结构化数据
- **添加属性**：
  ```
  属性名:: 属性值
  ```
- **属性类型**：
  - 文本（default）
  - 数字（number）
  - 日期（date）
  - 复选框（checkbox）
  - URL
  - 节点引用（node）

### 5. 标签（Tags）和类（Classes）
- **标签**：使用 `#标签名` 创建标签
- **类（Class）**：在 DB 版本中，标签可以作为"类"使用
- **类的属性**：可以为标签定义属性，所有使用该标签的块都会继承这些属性

---

## 📝 基础操作

### 创建和编辑内容

#### 创建新页面
1. **方法一**：使用快捷键
   - `Cmd/Ctrl + O` 打开命令面板
   - 输入页面名称，回车

2. **方法二**：使用双中括号
   - 输入 `[[页面名称]]`
   - 点击或按 `Enter` 进入页面

3. **方法三**：从侧边栏
   - 点击左侧边栏的"+"按钮
   - 输入页面名称

#### 创建日记
- 点击左侧边栏的日历图标
- 或使用快捷键 `Cmd/Ctrl + J`
- 日记会自动按日期命名（如：2025-01-26）

#### 编辑块
- 点击块开始编辑
- 或使用快捷键 `Cmd/Ctrl + Enter` 进入编辑模式
- `Esc` 退出编辑模式

### 块操作

#### 移动块
- **上下移动**：
  - `Cmd/Ctrl + Shift + ↑`：向上移动
  - `Cmd/Ctrl + Shift + ↓`：向下移动
- **缩进/取消缩进**：
  - `Tab`：向右缩进（创建子块）
  - `Shift + Tab`：向左缩进（提升层级）

#### 选择多个块
- `Cmd/Ctrl + Shift + ↑/↓`：扩展选择
- `Cmd/Ctrl + Shift + Click`：多选块

#### 删除块
- `Backspace` 或 `Delete`：删除当前块
- `Cmd/Ctrl + X`：剪切块

### 链接和引用

#### 页面链接
```
[[页面名称]]
```
- 输入时自动补全
- 点击链接跳转到页面

#### 块引用
```
((块ID))
```
- 在块上右键 → "复制块引用"
- 或使用快捷键 `Cmd/Ctrl + Shift + C`

#### 标签
```
#标签名
```
- 自动创建标签页面
- 点击标签查看所有相关笔记

### 属性操作

#### 添加属性
在页面或块的开头添加：
```
作者:: 张三
日期:: 2025-01-26
状态:: 进行中
```

#### 查看属性
- 页面属性显示在页面顶部
- 块属性显示在块下方

#### 属性类型设置
1. 进入属性编辑
2. 点击属性名旁的设置图标
3. 选择属性类型：
   - Text（文本）
   - Number（数字）
   - Date（日期）
   - Checkbox（复选框）
   - URL
   - Node（节点引用）

---

## 🎯 高级功能

### 搜索功能

#### 全局搜索
- **快捷键**：`Cmd/Ctrl + K`
- **搜索内容**：
  - 页面名称
  - 块内容
  - 属性值
  - 标签

#### 页面内搜索
- **快捷键**：`Cmd/Ctrl + F`
- 在当前页面内搜索

#### 高级查询
使用 Datalog 查询语法：
```clojure
[:find ?b
 :where
 [?b :block/content ?content]
 [(clojure.string/includes? ?content "关键词")]]
```

### 命令面板

- **打开**：`Cmd/Ctrl + P` 或 `Cmd/Ctrl + Shift + P`
- **常用命令**：
  - `Create page`：创建页面
  - `Go to`：跳转到页面
  - `Search`：搜索
  - `Toggle theme`：切换主题
  - `Open settings`：打开设置

### 侧边栏功能

#### 左侧边栏
- **导航**：页面列表、收藏、最近使用
- **日记**：快速访问日记
- **切换图谱**：管理多个图谱

#### 右侧边栏
- **页面引用**：显示引用当前页面的所有地方
- **块引用**：显示引用当前块的地方
- **图谱视图**：可视化页面关系
- **目录**：当前页面的目录结构

### 标签和类系统

#### 创建标签类
1. 创建标签：`#任务`
2. 进入标签页面
3. 添加属性：
   ```
   状态:: 待办
   优先级:: 高
   截止日期:: 
   ```
4. 这些属性会被所有使用 `#任务` 标签的块继承

#### 使用标签
在任何块中添加标签：
```
- 完成项目报告 #任务 #工作
  状态:: 进行中
  优先级:: 高
```

### 模板系统

#### 创建模板
1. 创建一个页面，命名为 `Template/项目模板`
2. 添加模板内容：
   ```
   - 项目名称：{{title}}
   - 负责人：{{负责人}}
   - 截止日期：{{截止日期}}
   - 状态：{{状态}}
   ```

#### 使用模板
1. 创建新页面
2. 在命令面板输入 `/template`
3. 选择模板

### 导出功能

#### 导出为 Markdown
1. 点击右上角菜单
2. 选择"导出"
3. 选择"Markdown"
4. 选择导出范围（当前页面/所有页面）

#### 导出为 HTML
1. 选择"导出为 HTML"
2. 可以自定义 CSS 样式
3. 适合发布到网站

---

## ⌨️ 快捷键参考

### 编辑相关

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 创建新块 |
| `Shift + Enter` | 在同一块内换行 |
| `Tab` | 向右缩进（创建子块） |
| `Shift + Tab` | 向左缩进 |
| `Cmd/Ctrl + Enter` | 进入编辑模式 |
| `Esc` | 退出编辑模式 |
| `Cmd/Ctrl + B` | 粗体 |
| `Cmd/Ctrl + I` | 斜体 |
| `Cmd/Ctrl + Shift + H` | 高亮 |

### 导航相关

| 快捷键 | 功能 |
|--------|------|
| `Cmd/Ctrl + O` | 打开/创建页面 |
| `Cmd/Ctrl + J` | 打开日记 |
| `Cmd/Ctrl + K` | 全局搜索 |
| `Cmd/Ctrl + F` | 页面内搜索 |
| `Cmd/Ctrl + P` | 命令面板 |
| `Cmd/Ctrl + [` | 返回上一页 |
| `Cmd/Ctrl + ]` | 前进下一页 |

### 块操作

| 快捷键 | 功能 |
|--------|------|
| `Cmd/Ctrl + Shift + ↑` | 向上移动块 |
| `Cmd/Ctrl + Shift + ↓` | 向下移动块 |
| `Cmd/Ctrl + Shift + C` | 复制块引用 |
| `Cmd/Ctrl + X` | 剪切块 |
| `Cmd/Ctrl + V` | 粘贴块 |

### 界面控制

| 快捷键 | 功能 |
|--------|------|
| `t l` | 切换左侧边栏 |
| `t r` | 切换右侧边栏 |
| `t t` | 切换主题（亮色/暗色） |
| `t s` 或 `Cmd/Ctrl + ,` | 打开设置 |
| `Shift + /` | 显示帮助 |

### 任务管理

| 快捷键 | 功能 |
|--------|------|
| `Cmd/Ctrl + Enter` | 切换任务状态（TODO/DOING/DONE） |
| `Cmd/Ctrl + Shift + Enter` | 标记为完成 |

---

## ❓ 常见问题

### Q1: 旧版本的文件笔记能导入吗？
**A:** 可以！新版本支持从文件图谱（File Graph）导入：
1. 创建新图谱时选择"从文件导入"
2. 选择你的旧笔记文件夹
3. 系统会自动转换格式

### Q2: 数据存储在哪里？
**A:** DB 版本的数据存储在 SQLite 数据库中：
- **位置**：`~/Library/Application Support/Logseq/graphs/` (macOS)
- **格式**：`.sqlite` 文件
- **备份**：建议定期导出备份

### Q3: 如何备份数据？
**A:** 有多种方式：
1. **导出为 Markdown**：定期导出所有页面
2. **SQLite 备份**：直接复制 `.sqlite` 文件
3. **使用 RTC 同步**：开启实时协作功能（需要申请）

### Q4: 白板功能去哪了？
**A:** 白板功能已从核心代码中移除，因为：
- 只支持旧的文件图谱
- 不支持新的数据库图谱
- 未来可能通过插件重新实现

### Q5: 如何切换回旧版本？
**A:** 
- 旧版本仍然可用，但不再更新
- 新版本和旧版本可以共存
- 建议逐步迁移到新版本

### Q6: 属性（Properties）和标签（Tags）有什么区别？
**A:**
- **属性**：用于存储结构化数据（如：作者、日期、状态）
- **标签**：用于分类和组织（如：#工作、#学习）
- **标签作为类**：标签可以定义属性，所有使用该标签的块会继承这些属性

### Q7: 如何自定义快捷键？
**A:**
1. 打开设置（`t s` 或 `Cmd/Ctrl + ,`）
2. 找到"快捷键"设置
3. 点击要修改的快捷键
4. 输入新的快捷键组合

### Q8: 如何安装插件？
**A:**
1. 打开设置
2. 找到"插件"选项
3. 浏览插件市场
4. 点击"安装"
5. 启用插件

---

## 🔗 有用的资源

### 官方资源
- **文档**：https://docs.logseq.com/
- **教程**：https://docs.logseq.com/#/page/tutorial
- **FAQ**：https://docs.logseq.com/#/page/faq
- **论坛**：https://discuss.logseq.com
- **Discord**：https://discord.gg/KpN4eHY

### 社区资源
- **Awesome Logseq**：https://github.com/logseq/awesome-logseq
- **插件市场**：在设置中访问
- **主题市场**：在设置中访问

### 获取帮助
- **Bug 反馈**：https://github.com/logseq/logseq/issues
- **功能建议**：https://discuss.logseq.com/c/feedback/feature-requests/
- **中文社区**：Discord #中文频道

---

## 📌 重要提示

1. **数据备份**：DB 版本仍在 Beta 阶段，建议定期备份
2. **功能差异**：某些旧版本功能在新版本中可能不可用
3. **性能优化**：DB 版本查询更快，但首次加载可能较慢
4. **移动端**：新版本有专门的移动应用（iOS 已发布，Android 即将发布）

---

## 🎓 学习路径建议

### 第1周：基础操作
- [ ] 创建第一个图谱
- [ ] 学会创建页面和块
- [ ] 掌握基本快捷键
- [ ] 了解链接和引用

### 第2周：结构化数据
- [ ] 学习使用属性
- [ ] 创建标签和类
- [ ] 使用模板
- [ ] 掌握搜索功能

### 第3周：高级功能
- [ ] 学习 Datalog 查询
- [ ] 自定义快捷键
- [ ] 安装和使用插件
- [ ] 导出和备份

### 第4周：工作流优化
- [ ] 建立个人知识体系
- [ ] 设计标签体系
- [ ] 创建常用模板
- [ ] 探索社区资源

---

**祝你使用愉快！如有问题，欢迎在社区寻求帮助。** 🚀
